!function(a){"use strict";function b(){this.frames=[],this.lastId=0,this.raf=c,this.batch={hash:{},read:[],write:[],mode:null}}{var c=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(a){return window.setTimeout(a,1e3/60)};window.cancelAnimationFrame||window.cancelRequestAnimationFrame||window.mozCancelAnimationFrame||window.mozCancelRequestAnimationFrame||window.webkitCancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.msCancelAnimationFrame||window.msCancelRequestAnimationFrame||function(a){window.clearTimeout(a)}}b.prototype.read=function(a,b){var c=this.add("read",a,b),d=c.id;this.batch.read.push(c.id);var e="reading"===this.batch.mode||this.batch.scheduled;return e?d:(this.scheduleBatch(),d)},b.prototype.write=function(a,b){var c=this.add("write",a,b),d=this.batch.mode,e=c.id;this.batch.write.push(c.id);var f="writing"===d||"reading"===d||this.batch.scheduled;return f?e:(this.scheduleBatch(),e)},b.prototype.defer=function(a,b,c){"function"==typeof a&&(c=b,b=a,a=1);var d=this,e=a-1;return this.schedule(e,function(){d.run({fn:b,ctx:c})})},b.prototype.clear=function(a){if("function"==typeof a)return this.clearFrame(a);var b=this.batch.hash[a];if(b){var c=this.batch[b.type],d=c.indexOf(a);delete this.batch.hash[a],~d&&c.splice(d,1)}},b.prototype.clearFrame=function(a){var b=this.frames.indexOf(a);~b&&this.frames.splice(b,1)},b.prototype.scheduleBatch=function(){var a=this;this.schedule(0,function(){a.batch.scheduled=!1,a.runBatch()}),this.batch.scheduled=!0},b.prototype.uniqueId=function(){return++this.lastId},b.prototype.flush=function(a){for(var b;b=a.shift();)this.run(this.batch.hash[b])},b.prototype.runBatch=function(){try{this.batch.mode="reading",this.flush(this.batch.read),this.batch.mode="writing",this.flush(this.batch.write),this.batch.mode=null}catch(a){throw this.runBatch(),a}},b.prototype.add=function(a,b,c){var d=this.uniqueId();return this.batch.hash[d]={id:d,fn:b,ctx:c,type:a}},b.prototype.run=function(a){var b=a.ctx||this,c=a.fn;if(delete this.batch.hash[a.id],!this.onError)return c.call(b);try{c.call(b)}catch(d){this.onError(d)}},b.prototype.loop=function(){var a=this,b=this.raf;this.looping||(b(function c(){var d=a.frames.shift();a.frames.length?b(c):a.looping=!1,d&&d()}),this.looping=!0)},b.prototype.schedule=function(a,b){return this.frames[a]?this.schedule(a+1,b):(this.loop(),this.frames[a]=b)},a=a||new b,"undefined"!=typeof module&&module.exports?module.exports=a:"function"==typeof define&&define.amd?define(function(){return a}):window.fastdom=a}(window.fastdom),window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(function(){a(+new Date)},1e3/60)},function(a){"use strict";var b=function(b){return b.test(navigator.userAgent||navigator.vendor||a.opera)},c=a.Device={isAndroid:function(){return b(/Android/i)},isBlackBerry:function(){return b(/BlackBerry/i)},isiOS:function(){return b(/iP(hone|od|ad)/i)},isiPhone:function(){return b(/iPhone/i)},isOpera:function(){return b(/Opera M(obi|ini)/i)},isChrome:function(){return!!a.chrome},isWindows:function(){return b(/IEMobile/i)},isMobile:function(){return c.isAndroid()||c.isBlackBerry()||c.isiOS()||c.isOpera()||c.isWindows()},isMac:function(){return"MacIntel"===navigator.platform},isRetina:function(){return a.devicePixelRatio>=2},isMacRetinaChrome:function(){return c.isChrome()&&c.isMac()&&c.isRetina()}}}(window),function(a,b,c,d){"use strict";function e(a,b){return function(){return a.apply(b,arguments)}}function f(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent&&a.attachEvent("on"+b,c)}function g(a,b){this.el=a,this.options={},this.setOptions(b||{}),this.isiPhone=c.isiPhone(),this.isDesktop=!c.isMobile(),this.initialize()}g._bind=e,g._addEventListener=f,g.DEFAULTS={property:"height",navigationSelector:".section-navigation",headerSelector:".section-header"},g.getViewportHeight=function(){return a.innerHeight||b.clientHeight},g.getViewportWidth=function(){return a.innerWidth||b.clientWidth},g.prototype={initialize:function(){this.navigation=this._getNavigation(),this.header=this._getHeader(),this.registerWindowEvents(g._bind(this.handleResize,this)),this.refresh()},setOptions:function(a){var b=this.el.getAttribute("data-viewport-height-property"),c=this.el.getAttribute("data-viewport-height-ignore-orientation");this.options={};for(var d in g.DEFAULTS)g.DEFAULTS.hasOwnProperty(d)&&(this.options[d]=g.DEFAULTS[d]);"property"in a?this.options.property=a.property:b&&(this.options.property=b),"ignoreOrientation"in a?this.options.ignoreOrientation=a.ignoreOrientation:c&&(this.options.ignoreOrientation=c),this.options.property=this._hyphensToCamelCase(this.options.property)},getAdjustedViewport:function(a){d.read(function(){var b=g.getViewportHeight(),c=g.getViewportWidth();if("ignoreOrientation"in this.options){var d=c/b;if("portrait"===this.options.ignoreOrientation&&1>d)return void this.clear();if("landscape"===this.options.ignoreOrientation&&d>=1)return void this.clear()}var e=this.getFixedElementsHeight(),f=b-e;this.isiPhone?f+=this._getiPhoneHeightAdjustment():this.isDesktop&&(f+=this._getDesktopHeightAdjustment()),a(f,c)},this)},registerWindowEvents:function(b){g._addEventListener(a,"resize",b),g._addEventListener(a,"orientationchange",b)},handleResize:function(){this.refresh()},refresh:function(){this.getAdjustedViewport(e(function(a,b){c.isMobile()&&this.previousViewportWidth===b||(this.previousViewportWidth=b,d.write(function(){this.el.style[this.options.property]=a+"px"},this))},this))},clear:function(){d.write(function(){this.el.style[this.options.property]=""},this)},_getiPhoneHeightAdjustment:function(){var a=this._getHeader();return a?this._isTitleSection()?"fixed"!==this._getCSSValue(a,"position")&&"none"!==this._getCSSValue(a,"display")?this._getElementHeight(a):0:"fixed"!==this._getCSSValue(a,"position")&&"none"!==this._getCSSValue(a,"display")?108:70:0},_getDesktopHeightAdjustment:function(){var a=this._getHeader();if(this._isTitleSection()&&a){var b=this._getNavigation();if("none"!==this._getCSSValue(a,"display")&&"fixed"!==this._getCSSValue(a,"position")){var c=0;return b&&(c=this._getElementHeight(b)),-(this._getElementHeight(a)-c)}if("none"!==this._getCSSValue(a,"display")&&"fixed"===this._getCSSValue(a,"position")){var d=0;return b||(d=-this._getElementHeight(a)),d}}return 0},_getNavigation:function(){return this.navigation||(this.navigation=document.querySelector(this.options.navigationSelector)),this.navigation},_getHeader:function(){return this.header||(this.header=document.querySelector(this.options.headerSelector)),this.header},_isTitleSection:function(){return-1!==this.el.className.indexOf("section-title")},_hyphensToCamelCase:function(a){return a.replace(/\-([a-z])/gi,function(a,b){return b.toUpperCase()})},getFixedElementsHeight:function(){var a=0,b=this._getHeader(),c=this._getNavigation();return c&&b?("fixed"===this._getCSSValue(b,"position")?a+=this._getElementHeight(b):"none"!==this._getCSSValue(c,"display")&&(a+=this._getElementHeight(c)),a):a},_getCSSValue:function(b,c){return a.getComputedStyle?a.getComputedStyle(b)[c]:b.currentStyle?b.currentStyle[c]:null},_getElementHeight:function(a){return a.offsetHeight}},g.attachTo=function(a,b){return a.viewportHeight?a.viewportHeight.refresh():a.viewportHeight=new g(a,b),a.viewportHeight},g.refreshAll=function(){for(var a=document.querySelectorAll("[data-viewport-height]"),b=0,c=a.length;c>b;b++)g.attachTo(a[b])},f(a,"load",g.refreshAll),a.ViewportHeight=g}(window,document.documentElement,window.Device,window.fastdom),function(a){"use strict";delete a.DEFAULTS.headerSelector}(ViewportHeight);